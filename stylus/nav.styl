$burger-ease ?= cubic-bezier(0.77, 0.2, 0.05, 1)

nav
  height size(10)
  position fixed
  left 0
  right 0
  background-color transparent
  display flex
  align-items center
  justify-content flex-end
  padding 0 size(3)
  color $color--primary
  z-index 10
  elevation(0)
  elevation-transition()

  &.nav--plain
    background-color white
    elevation(7)

  ul.menu
    display flex
    align-items center

    > li.menu-item
      transition opacity 0.75s, transform 0.35s ease
      padding size(1.5) size(2)

      for $n in 1..10
        &:nth-child({$n})
          transition-delay ($n + 1) * 0.1s

      a[href]
        link-interactive-on()
        color $color--primary

    > li.menu-item-has-children
      &::after
        content 'â–¼'
        font-size 9px
        transform scale(1, 0.55)
        user-select none
        display inline-block
        margin-left 2px
        position relative
        bottom 2px

      &:hover, &:focus-within
        ul.sub-menu
          opacity 1
          visibility visible

  ul.sub-menu
    opacity 0
    visibility hidden
    transition opacity 0.2s
    position absolute
    background-color lighten($color--secondary, 75%)
    padding size(1.5) size(1)
    margin-top size(1)
    border-radius size(1)
    elevation(7)

    > li.menu-item
      padding size(1) size(1.5)
      width 100%

      a[href]
        width 100%
        color $color--primary

#burger
  display block
  position relative
  top 0
  left 0
  z-index 1
  user-select none

  // Hidden input for the hamburger
  input
    display none
    width size(3)
    height size(3)
    position absolute
    top -6px
    left -4px
    cursor pointer
    opacity 0
    z-index 2
    -webkit-touch-callout none

  // Hamburger
  span
    display none
    width size(3)
    height 2px
    margin-bottom size(0.75)
    position relative
    background white
    border-radius 3px
    z-index 1
    transform-origin 2px 0px
    transition transform 0.5s $burger-ease, background 0.5s $burger-ease, opacity 0.55s ease

    &:first-child
      transform-origin 0% 0%

    &:nth-last-child(2)
      transform-origin 0% 100%

  .burger-background
    display none
    background-color $color--primary
    width size(14.5)
    height size(14.5)
    border-radius size(7)
    position absolute
    top size(-8.5)
    left size(-8.5)
    transition transform 0.5s $burger-ease
    elevation(5)

  input
    // Burger animation
    &:checked ~ span
      opacity 1
      transform rotate(45deg) scale(1.07, 1)
      background white

    &:checked ~ span:nth-last-child(3)
      opacity 0
      transform rotate(0deg) scale(0.2, 0.2)

    &:checked ~ span:nth-last-child(2)
      transform rotate(-45deg) scale(1.07, 1)

    // Menu animation
    &:checked ~ .menu-content
      transform none

      ul.menu > li.menu-item
        opacity 1
        transform none

    &:checked ~ .burger-background
      transform scale(6)

+media-down('xs')
  nav
    height 100%
    background none
    justify-content flex-start
    align-items flex-start
    padding size(1.5)

    &.nav--plain
      background none

    // Make this absolute positioned at the top left of the screen
    #burger .menu-content
      position absolute
      width 100vw
      transform-origin 0% 0%
      transform translate(-100%, 0)
      transition transform 0.5s $burger-ease

    ul.menu
      margin-top size(1)
      display block

      > li.menu-item
        opacity 0
        transform translateX(-100px)

      > li.menu-item-has-children
        &::after
          content ''
          display none

    ul.sub-menu
      display none

  #burger
    .burger-background, input, span
      display block
